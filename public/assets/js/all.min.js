!function(){"use strict";function e(e,t){var r=t.$get();e.preferredLanguage("pt_BR"),e.useSanitizeValueStrategy("escape"),e.useStaticFilesLoader({prefix:"app/_resources/locale-",suffix:".json?r="+(r.rev||"")})}e.$inject=["$translateProvider","$windowProvider"],angular.module("app",["ngStorage","ngMessages","ngMap","pascalprecht.translate","ui.router","ui.bootstrap","ui.utils.masks","app.generic","app.customers","app.dashboard","app.orders","app.products","app.referencePoints","templates"]).config(e)}(),function(){"use strict";angular.module("templates",[])}(),function(){"use strict";angular.module("app.generic",[])}(),function(){"use strict";angular.module("app.customers",[])}(),function(){"use strict";angular.module("app.dashboard",[])}(),function(){"use strict";angular.module("app.orders",[])}(),function(){"use strict";angular.module("app.products",[])}(),function(){"use strict";angular.module("app.referencePoints",[])}(),angular.module("templates").run(["$templateCache",function(e){e.put("/_layout/header.html",'<header class="header"><a class="pull-left sidebar-button" ng-click="toggleMenu($event)"><i class="fa fa-bars" aria-hidden="true"></i></a><h1>{{ state.current.data.title }}</h1></header><!-- .header -->'),e.put("/_layout/layout.html",'<app-notification class="alert-fixed"></app-notification><aside class="sidebar {{ $root.isOpenMenu ? \'is-open\' : \'is-closed\'}}"><div class="sidebar-full" ng-include="\'/_layout/sidebar.html\'"></div></aside><!-- .sidebar --><main class="main {{ $root.isOpenMenu ? \'is-open\' : \'is-closed\'}}" ng-click="closeMenu($event)"><div ng-include="\'/_layout/header.html\'"></div><p class="alert alert-success" ng-if="vm.alert"><strong>Success!</strong> Indicates a successful or positive action.</p><article class="content" ui-view id="view"></article></main><!-- .main -->'),e.put("/_layout/sidebar.html",'<a class="sidebar-image-wrapper logo" ui-sref="app.dashboard" href="#/dashboard"><img src="/assets/images/logo-strudel-folhadinho-vertical.png" alt="Strudel Folhadinho"></a><ul class="sidebar-nav"><li class="sidebar-item"><a ng-class="{\'is-active\': state.current.name.includes(\'app.dashboard\')}" ui-sref="app.dashboard" href="#/dashboard" class="sidebar-link"><span class="sidebar-icon"><i class="fa fa-home" aria-hidden="true"></i> </span><span class="sidebar-text">Home</span></a></li><li class="sidebar-item"><a ng-class="{\'is-active\': state.current.name.includes(\'app.customer\')}" href="#/customers" ui-sref="app.customers" class="sidebar-link"><span class="sidebar-icon"><i class="fa fa-users" aria-hidden="true"></i> </span><span class="sidebar-text">Clientes</span></a></li><li class="sidebar-item"><a ng-class="{\'is-active\': state.current.name.includes(\'app.product\')}" ui-sref="app.products" href="#/products" class="sidebar-link"><span class="sidebar-icon"><i class="fa fa-shopping-bag" aria-hidden="true"></i> </span><span class="sidebar-text">Produtos</span></a></li><li class="sidebar-item"><a ng-class="{\'is-active\': state.current.name.includes(\'app.order\')}" ui-sref="app.orders" href="#/orders" class="sidebar-link"><span class="sidebar-icon"><i class="fa fa-shopping-cart" aria-hidden="true"></i> </span><span class="sidebar-text">Pedidos</span></a></li><li class="sidebar-item"><a ng-class="{\'is-active\': state.current.name == \'app.map\'}" ui-sref="app.map" href="#/map" class="sidebar-link"><span class="sidebar-icon"><i class="fa fa-map-marker" aria-hidden="true"></i> </span><span class="sidebar-text">Mapa</span></a></li><li ng-class="{\'is-active\': state.current.name.includes(\'app.referencePoints\')}" class="sidebar-item"><a ng-click="toogleMenuItem($event)" class="sidebar-link"><span class="sidebar-icon"><i class="fa fa-map-pin" aria-hidden="true"></i> </span><span class="sidebar-text">CEP</span> <span class="sidebar-arrow"><i class="fa fa-caret-down" aria-hidden="true"></i></span></a><ul class="sidebar-subnav"><li class="sidebar-item"><a ng-class="{\'is-active\': state.current.name.includes(\'app.referencePoints\')}" ui-sref="app.referencePoints" href="#/referencePoints" class="sidebar-sublink"><span class="sidebar-sublink-text">Pontos de Ref.</span></a></li></ul></li></ul>'),e.put("/customers/fields.html",'<fieldset class="row"><div class="col-md-3 col-sm-6 col-xs-6 form-group"><label>Nome *</label><input type="text" name="givenName" class="form-control" placeholder="Nome do Cliente" size="50" autocomplete="off" required ng-model="vm.customer.givenName" ng-minlength="3" maxlength="50"></div><div class="col-md-3 col-sm-6 col-xs-6 form-group"><label>Sobrenome</label><input type="text" name="familyName" class="form-control" placeholder="Sobrenome do Cliente" size="50" autocomplete="off" ng-model="vm.customer.familyName" ng-minlength="3" maxlength="50"></div><div class="col-md-3 col-sm-6 col-xs-12 form-group"><label>Telefone</label><input type="tel" name="telephone" class="form-control" size="11" autocomplete="off" ui-br-phone-number ng-model="vm.customer.telephone" maxlength="15"></div><!--\n  <div class="col-md-3 col-sm-6 form-group">\n    <label>CPF</label>\n    <input\n        type="text"\n        name="cpf"\n        class="form-control"\n        placeholder="Ex: 000.000.000-00"\n        size="50"\n        autocomplete="off"\n        ui-br-cpf-mask\n        ng-model="vm.customer.cpf"\n        maxlength="25">\n  </div>\n  <div class="col-md-2 col-sm-6 form-group">\n    <label>Apelido</label>\n    <input\n        type="text"\n        name="nickName"\n        class="form-control"\n        placeholder="Apelido do Cliente"\n        size="50"\n        autocomplete="off"\n        ng-model="vm.customer.nickName"\n        ng-minlength="3"\n        maxlength="50">\n  </div>\n  <div class="col-md-2 col-sm-6 form-group">\n    <label>Sexo</label>\n    <select\n        name="gender"\n        class="form-control"\n        ng-model="vm.customer.gender">\n        <option value="F">Feminino</option>\n        <option value="M">Masculino</option>\n    </select>\n  </div>\n  <div class="col-md-3 col-sm-6 form-group">\n    <label>E-mail</label>\n    <input\n        type="email"\n        name="email"\n        class="form-control"\n        placeholder="Ex: cliente@tegustaempanadas.com.br"\n        size="100"\n        autocomplete="off"\n        ng-model="vm.customer.email"\n        ng-minlength="3"\n        maxlength="100">\n  </div>\n  <div class="col-md-2 col-sm-6 form-group">\n    <label>Data de Nasc</label>\n\n    <input type="text" class="form-control"\n        maxlength="10"\n        uib-datepicker-popup="dd/MM/yyyy"\n        ng-model="vm.customer.birthDate"\n        is-open="birthDate.opened"\n        datepicker-options="vm.dateOptions"\n        close-text="Fechar"\n        show-button-bar="false"\n        ng-focus="birthDate.opened = true" />\n  </div>\n--></fieldset><fieldset class="row"><legend class="col-md-12 col-sm-12">Endereço de entrega</legend><div class="col-md-2 col-sm-6 col-xs-12 form-group"><label>CEP</label><input type="tel" name="address[postalCode]" class="form-control" size="9" autocomplete="off" ui-br-cep-mask ng-model="vm.customer.address.postalCode" ng-minlength="9" ng-keyup="vm.findByPostalCode(vm.customer.address.postalCode)" ng-blur="vm.findByPostalCode(vm.customer.address.postalCode)" maxlength="9"></div><div class="col-md-5 col-sm-6 col-xs-12 form-group"><label>Rua</label><input type="text" name="address[streetAddress]" class="form-control" size="100" autocomplete="off" ng-model="vm.customer.address.streetAddress" ng-minlength="3" ng-disabled="vm.disableAddressFields" maxlength="100"></div><div class="col-md-2 col-sm-6 col-xs-6 form-group"><label>Número</label><input type="tel" name="address[number]" class="form-control" size="100" autocomplete="off" ng-model="vm.customer.address.number" ng-blur="vm.findReferencePoint(vm.customer.address)" placeholder="Ex: 206" maxlength="100"></div><div class="col-md-3 col-sm-6 col-xs-6 form-group"><label>Complemento</label><input type="text" name="address[complement]" class="form-control" size="50" autocomplete="off" placeholder="Ex: ap 51 bloco A" ng-model="vm.customer.address.complement" maxlength="50"></div><div class="col-md-3 col-sm-6 col-xs-6 form-group"><label>Estado</label><select name="addressRegion" class="form-control" name="address[addressRegion]" ng-model="vm.customer.address.addressRegion" ng-disabled="vm.disableAddressFields" required><option value="AC">Acre</option><option value="AL">Alagoas</option><option value="AP">Amapá</option><option value="AM">Amazonas</option><option value="BA">Bahia</option><option value="CE">Ceará</option><option value="DF">Distrito Federal</option><option value="ES">Espirito Santo</option><option value="GO">Goiás</option><option value="MA">Maranhão</option><option value="MS">Mato Grosso do Sul</option><option value="MT">Mato Grosso</option><option value="MG">Minas Gerais</option><option value="PA">Pará</option><option value="PB">Paraíba</option><option value="PR">Paraná</option><option value="PE">Pernambuco</option><option value="PI">Piauí</option><option value="RJ">Rio de Janeiro</option><option value="RN">Rio Grande do Norte</option><option value="RS">Rio Grande do Sul</option><option value="RO">Rondônia</option><option value="RR">Roraima</option><option value="SC">Santa Catarina</option><option value="SP">São Paulo</option><option value="SE">Sergipe</option><option value="TO">Tocantins</option></select></div><div class="col-md-3 col-sm-6 col-xs-6 form-group"><label>Cidade</label><input type="text" name="address[district]" class="form-control" size="100" autocomplete="off" ng-model="vm.customer.address.district" ng-minlength="3" ng-disabled="vm.disableAddressFields" value="São Paulo" maxlength="100"></div><div class="col-md-3 col-sm-6 col-xs-12 form-group"><label>Bairro</label><input type="text" name="address[addressLocality]" class="form-control" size="100" autocomplete="off" ng-model="vm.customer.address.addressLocality" ng-minlength="3" ng-disabled="vm.disableAddressFields" maxlength="100"></div><div class="col-md-3 col-sm-6 col-xs-12 form-group"><label>Referência</label><input type="text" name="address[referencePoint]" class="form-control" size="50" autocomplete="off" ng-model="vm.customer.address.referencePoint" maxlength="50"></div></fieldset>'),e.put("/customers/form.html",'<form name="vm.customerForm" ng-submit="vm.saveCustomer(vm.customer)"><div ng-include="\'/customers/fields.html\'"></div><fieldset class="row"><div class="col-md-12"><input type="submit" ng-disabled="vm.customerForm.$invalid" class="btn btn-primary" value="Salvar"></div></fieldset></form><form name="vm.orderForm" ng-submit="vm.saveOrder(vm.customer, vm.order, vm.items, vm.gifts)"><div ng-include="\'/orders/fields.html\'"></div><fieldset class="row"><div class="col-md-12"><input type="submit" ng-disabled="vm.orderForm.$invalid" class="btn btn-primary" value="Salvar"></div></fieldset></form><div ng-include="\'/orders/print.html\'"></div>'),e.put("/customers/list.html",'<form name="vm.searchCustomerForm" class="search-form" role="search" ng-submit="state.go(state.current.name, { q: vm.q })" novalidate><div class="input-group"><input type="text" id="search-input" placeholder="Telefone, email ou nome" autocomplete="off" name="search" ng-model="vm.q" class="form-control"> <span class="input-group-btn"><button class="btn btn-primary" type="submit" ng-disabled="vm.searchCustomerForm.$invalid"><i class="fa fa-search" aria-hidden="true"></i></button></span></div></form><button class="btn btn-secondary" ng-click="state.go(\'app.customer\')">+ Novo</button><p ng-if="!vm.data.items.length">Nenhum cliente encontrado</p><table class="table" ng-if="vm.data.items.length"><thead><tr><td>Nome</td><td>Telefones</td></tr></thead><tbody><tr class="pointer" ng-repeat="customer in vm.data.items" ng-click="state.go(\'app.customer\', { id: customer._id })"><td>{{ customer.givenName }}</td><td>{{ customer.telephone }}</td></tr></tbody></table><ul uib-pagination previous-text="&lsaquo;" next-text="&rsaquo;" last-text="&raquo;" force-ellipses="true" max-size="9" items-per-page="10" total-items="vm.data._metadata.total" ng-if="vm.data._metadata.total > vm.data._metadata.perPage" ng-model="vm.data._metadata.page" ng-change="state.go(state.current, { page: vm.data._metadata.page })"></ul>'),e.put("/dashboard/dashboard.html","dash"),e.put("/orders/fields.html",'<fieldset class="row" ng-if="!state.current.name.includes(\'app.customer\')"><legend class="col-md-12 col-sm-12">Cliente</legend><div class="col-md-12 col-sm-12"><input type="text" class="form-control" ng-model="vm.search" ng-keyup="vm.autocompleteCustomer(vm.search)"></div><div class="col-md-12 col-sm-12" ng-if="vm.order.customer.givenName">Cliente: {{ vm.order.customer.givenName }}</div></fieldset><fieldset class="row"><legend class="col-md-12 col-sm-12">Pedido</legend><div class="col-md-12 col-sm-12 order-items-table"><table class="table" border="0" cellspacing="0" cellpadding="0"><thead><tr><th>Produto</th><th width="100">Qnt</th><th width="50">Vl unit</th><th width="90">Total</th></tr></thead><tbody><tr ng-repeat="product in vm.items"><td><label for="item-{{ $index }}">{{ product.name }}</label></td><td><input type="tel" id="item-{{ $index }}" autocomplete="off" ng-model="product.quantity" maxlength="2" ui-number-mask="0" class="form-control input-small"></td><td class="align-right">{{ product.price | currency }}</td><td><span ng-if="product.quantity">{{ (product.total = (product.quantity || 0) * product.price) | currency }}</span></td></tr></tbody><tfoot><tr><td><b>Total:</b></td><td>{{ vm.items | sum:\'quantity\' }}</td><td></td><td>{{ vm.order.payment.subtotal = (vm.items | sum:\'total\') | currency }}</td></tr></tfoot></table></div></fieldset><fieldset class="row"><legend class="col-md-12 col-sm-12">Brinde</legend><div class="col-md-12 col-sm-12 order-items-table"><table class="table"><thead><tr><th>Produto</th><th width="100">Qnt</th><th width="50">Vl unit</th><th width="90">Total</th></tr></thead><tbody><tr ng-repeat="product in vm.gifts | filter:{ gift: true }"><td><label for="gift-{{ $index }}">{{ product.name }}</label></td><td><input type="tel" id="gift-{{ $index }}" autocomplete="off" ng-model="product.quantity" maxlength="2" ui-number-mask="0" class="form-control input-small"></td><td>Brinde</td><td></td></tr></tbody><tfoot><tr><td><b>Total:</b></td><td>{{ vm.gifts | sum:\'quantity\' }}</td><td></td><td>Grátis</td></tr></tfoot></table></div></fieldset><fieldset class="row"><div class="col-md-3 col-sm-3 col-xs-6 form-group"><label>Dia de entrega</label><input type="text" class="form-control" uib-datepicker-popup="dd/MM/yyyy" ng-model="vm.order.delivery.date" is-open="deliveryDate.opened" datepicker-options="vm.deliveryDateOptions" ng-required="true" close-text="Fechar" show-button-bar="false" ng-focus="deliveryDate.opened = true"></div><div class="col-md-3 col-sm-3 col-xs-6 form-group"><div uib-timepicker class="timepicker" ng-model="vm.order.delivery.date" show-seconds="false" meridians="[\'AM\', \'PM\']"></div></div><div class="col-md-3 col-sm-3 col-xs-6 form-group"><label>Taxa de entrega</label><input type="tel" class="form-control" size="50" autocomplete="off" ng-model="vm.order.delivery.price" ng-minlength="3" ui-money-mask value="5.0" max="100" maxlength="9"></div><div class="col-md-3 col-sm-3 col-xs-6 form-group"><label>Entregador</label><select class="form-control" ng-model="vm.order.delivery.courier"><option value="Eduardo">Eduardo</option><option value="Kleber">Kleber</option><option value="Edson">Edson</option><option value="Carlos">Carlos</option><option value="William">William</option><option value="Juliana">Juliana</option></select></div></fieldset><fieldset class="row"><div class="col-md-3 col-sm-3"><label>Forma de Pagamento</label><select class="form-control" ng-change="vm.changePaymentType(vm.order.payment)" ng-model="vm.order.payment.paymentType"><option value="DEBIT_CARD">{{ \'DEBIT_CARD\' | translate }}</option><option value="CREDIT_CARD">{{ \'CREDIT_CARD\' | translate }}</option><option value="SODEXO">{{ \'SODEXO\' | translate }}</option><option value="MONEY">{{ \'MONEY\' | translate }}</option><option value="TICKET">{{ \'TICKET\' | translate }}</option></select></div><div class="col-md-3 col-sm-3 col-xs-6"><label>Desconto</label><input class="form-control" ui-money-mask ng-model="vm.order.payment.discount"></div><div class="col-md-3 col-sm-3 col-xs-6" ng-if="vm.order.payment.paymentType == \'MONEY\'"><label>Pago em Dinheiro</label><input class="form-control" ui-money-mask ng-model="vm.order.payment.moneyTotal"></div><div class="col-md-3 col-sm-3 col-xs-6" ng-if="vm.order.payment.paymentType == \'MONEY\'"><label>Troco:</label><p class="form-control">{{ vm.order.payment.change = ( vm.order.payment.moneyTotal - vm.order.payment.total + vm.order.payment.discount ) | currency }}</p></div><div class="col-md-3 col-sm-3 col-xs-6"><label>Total:</label><p class="form-control">{{ vm.order.payment.total = ( vm.order.payment.subtotal + vm.order.delivery.price - vm.order.payment.discount ) | currency }}</p></div></fieldset>'),e.put("/orders/form.html",'<form name="vm.orderForm" ng-submit="vm.saveOrder(vm.order, vm.customer)"><div ng-include="\'/orders/fields.html\'" ng-if="vm.order._id"></div><fieldset class="row" ng-if="vm.order._id"><div class="col-md-12"><input type="submit" ng-disabled="vm.orderForm.$invalid" class="btn btn-primary" value="Salvar"></div></fieldset></form>'),e.put("/orders/list.html",'<form name="vm.searchOrderForm" class="search-form" role="search" ng-submit="state.go(state.current.name, { q: vm.q })" novalidate><div class="input-group"><input type="text" id="search-input" placeholder="Nome do cliente" autocomplete="off" name="search" ng-model="vm.q" class="form-control"> <span class="input-group-btn"><button class="btn btn-primary" type="submit" ng-disabled="vm.searchOrderForm.$invalid"><i class="fa fa-search" aria-hidden="true"></i></button></span></div></form><button class="btn btn-secondary" ng-click="state.go(\'app.order\')">+ Novo</button><p ng-if="!vm.data.items.length">Nenhum pedido encontrado</p><table class="table" ng-if="vm.data.items.length"><thead><tr><td>Nome</td><td>Total</td><td>Data da entrega</td><td>Bairro</td><td>Entregador</td></tr></thead><tbody><tr class="pointer" ng-repeat="order in vm.data.items" ng-click="state.go(\'app.order\', { id: order._id })"><td>{{ order.customer.givenName }}</td><td>{{ order.payment.total | currency }}</td><td>{{ order.delivery.date | date:\'dd/MM/yyyy HH:mm\' }}</td><td>{{ order.shippingAddress.addressLocality }}</td><td>{{ order.delivery.courier }}</td></tr></tbody></table><ul uib-pagination previous-text="&lsaquo;" next-text="&rsaquo;" last-text="&raquo;" force-ellipses="true" max-size="9" items-per-page="10" total-items="vm.data._metadata.total" ng-if="vm.data._metadata.total > vm.data._metadata.perPage" ng-model="vm.data._metadata.page" ng-change="state.go(state.current, { page: vm.data._metadata.page })"></ul>'),e.put("/orders/map.html",'<div id="map" map-lazy-load="{{ vm.googleMapsUrl }}" map-lazy-load-params="{{ vm.googleMapsUrl }}"><ng-map id="ng-map" default-style="false" center="{{ vm.organization.location }}" zoom="{{ vm.zoom }}"><marker position="{{ vm.organization.location }}" icon="{{ vm.organization.icon }}"></marker><marker ng-repeat="marker in vm.markers track by $index" position="{{ marker.position }}" label="{{ marker.label }}" icon="{{ marker.icon }}"></marker></ng-map></div>'),e.put("/orders/print.html",'<div class="row order-print"><section class="col-md-12"><table class="order-print-table order-print-header"><tr><td width="100%">{{ \'Te Gusta Empanadas\' | uppercase }}</td></tr><tr><td width="100%">{{ \'Butantã - São Paulo\' | uppercase }}</td></tr><tr><td width="100%">{{ \'cnpj 19.062.745/0001-03\' | uppercase }}</td></tr></table><table class="order-print-table"><tr><td>&nbsp;</td></tr><tr><td width="100%"><b>{{ vm.order.customer.givenName }} {{ vm.order.customer.familyName }}</b> {{ vm.order.customer.telephone || vm.order._customer.telephone }}</td></tr><tr><td width="100%">{{ vm.order.shippingAddress.addressLocality }}</td></tr><tr><td width="100%">{{ vm.order.shippingAddress.postalCode }} - {{ vm.order.shippingAddress.district }}, {{ vm.order.shippingAddress.addressRegion }}</td></tr><tr><td width="100%">{{ vm.order.shippingAddress.streetAddress }}</td></tr><tr><td width="100%">Número: {{ vm.order.shippingAddress.number }}</td></tr><tr><td width="100%">{{ vm.order.shippingAddress.complement }}</td></tr><tr><td width="100%">{{ vm.order.shippingAddress.referencePoint }}</td></tr><tr><td>&nbsp;</td></tr></table></section><section class="col-md-12"><table class="order-print-table"><tr><th width="10%">Qtd</th><th width="70%">Item</th><th width="20%">Preço</th></tr><tr ng-repeat="item in vm.order.items"><td>{{ item.quantity }}</td><td>{{ item.name }}</td><td class="align-right">{{ (item.subtotal = item.quantity * item.price) | currency }}</td></tr><tr><td colspan="3">&nbsp;</td></tr><tr ng-repeat="item in vm.order.gifts"><td>{{ item.quantity }}</td><td>{{ item.name }}</td><td class="align-right">brinde</td></tr><tr><td colspan="3">&nbsp;</td></tr><tr><td colspan="2"><b>Taxa de entrega:</b></td><td class="align-right">{{ vm.order.delivery.price | currency }}</td></tr><tr ng-if="vm.order.payment.discount"><td colspan="2"><b>Desconto:</b></td><td class="align-right">{{ vm.order.payment.discount | currency }}</td></tr><tr><td><b>Total:</b></td><td>{{ (vm.order.items | sum:\'quantity\') + (vm.order.gifts | sum:\'quantity\') }}</td><td class="align-right"><b>{{ vm.order.payment.total | currency }}</b></td></tr><tr ng-if="vm.order.payment.change"><td><b>Troco:</b></td><td>{{ vm.order.payment.change | currency }}</td><td class="align-right">{{ vm.order.payment.moneyTotal | currency }}</td></tr><tr><td colspan="2"><b>Forma de pagamento:</b></td><td>{{ vm.order.payment.paymentType | translate }}</td></tr><tr><td colspan="3">&nbsp;</td></tr></table></section><section class="col-md-12"><table class="order-print-table"><tr><td width="40%"><b>Entregador:</b></td><td colspan="3" width="60%">{{ vm.order.delivery.courier }}</td></tr><tr><td><b>Data:</b></td><td colspan="3">{{ vm.order.createdAt | date:\'dd/MM/yy HH:mm\' }}</td></tr><tr><td><b>Entrega:</b></td><td colspan="3">{{ vm.order.delivery.date | date:\'dd/MM/yy HH:mm\' }}</td></tr><tr><td colspan="3">&nbsp;</td></tr></table></section></div>'),e.put("/products/form.html",'<form name="vm.productForm" ng-submit="vm.save(vm.product)"><fieldset class="row"><div class="col-md-6 col-sm-6 form-group"><label>Nome *</label><input type="text" name="name" class="form-control" placeholder="Nome do Produto" size="50" autocomplete="off" required ng-model="vm.product.name" ng-minlength="3" maxlength="50"></div><div class="col-md-6 col-sm-6 form-group"><label>Preço *</label><input type="tel" name="price" class="form-control" placeholder="Preço do Produto" size="50" autocomplete="off" required ng-model="vm.product.price" ui-money-mask maxlength="50"></div><div class="col-md-6 col-sm-6 form-group"><label>Brinde</label><input type="checkbox" name="gift" class="form-control" ng-model="vm.product.gift"></div></fieldset><fieldset class="row"><div class="col-md-12"><input type="submit" ng-disabled="vm.productForm.$invalid" class="btn btn-primary" value="Salvar"></div></fieldset></form>'),e.put("/products/list.html",'<form name="vm.searchProductForm" class="search-form" role="search" ng-submit="state.go(state.current.name, { q: vm.q })" novalidate><div class="input-group"><input type="text" id="search-input" placeholder="Nome do produto" autocomplete="off" name="search" ng-model="vm.q" class="form-control"> <span class="input-group-btn"><button class="btn btn-primary" type="submit" ng-disabled="vm.searchProductForm.$invalid"><i class="fa fa-search" aria-hidden="true"></i></button></span></div></form><button class="btn btn-secondary" ng-click="state.go(\'app.product\')">+ Novo</button><p ng-if="!vm.data.items.length">Nenhum produto encontrado</p><table class="table" ng-if="vm.data.items.length"><thead><tr><td>Nome</td><td>Preço</td></tr></thead><tbody><tr class="pointer" ng-repeat="product in vm.data.items" ng-click="state.go(\'app.product\', { id: product._id })"><td>{{ product.name }}</td><td>{{ product.price | currency }}</td></tr></tbody></table><ul uib-pagination previous-text="&lsaquo;" next-text="&rsaquo;" last-text="&raquo;" force-ellipses="true" max-size="9" items-per-page="10" total-items="vm.data._metadata.total" ng-if="vm.data._metadata.total > vm.data._metadata.perPage" ng-model="vm.data._metadata.page" ng-change="state.go(state.current, { page: vm.data._metadata.page })"></ul>'),e.put("/referencePoints/form.html",'<form name="vm.referencePointForm" ng-submit="vm.save(vm.referencePoint)"><fieldset class="row"><div class="col-md-4 col-sm-6 form-group"><label>CEP</label><input type="text" name="postalCode" class="form-control" placeholder="CEP" size="50" autocomplete="off" required ng-model="vm.referencePoint.postalCode" ng-minlength="3" maxlength="10"></div><div class="col-md-4 col-sm-6 form-group"><label>Número *</label><input type="tel" name="number" class="form-control" size="50" autocomplete="off" required ng-model="vm.referencePoint.number" maxlength="50"></div><div class="col-md-4 col-sm-6 form-group"><label>Ponto de Referência</label><input type="text" name="referencePoint" required class="form-control" ng-model="vm.referencePoint.referencePoint"></div></fieldset><fieldset class="row"><div class="col-md-12"><input type="submit" ng-disabled="vm.referencePointForm.$invalid" class="btn btn-primary" value="Salvar"></div></fieldset></form>'),e.put("/referencePoints/list.html",'<form name="vm.searchOrderForm" class="search-form" role="search" ng-submit="state.go(state.current.name, { q: vm.q })" novalidate><div class="input-group"><input type="text" id="search-input" placeholder="CEP" autocomplete="off" name="search" ng-model="vm.q" class="form-control"> <span class="input-group-btn"><button class="btn btn-primary" type="submit" ng-disabled="vm.searchOrderForm.$invalid"><i class="fa fa-search" aria-hidden="true"></i></button></span></div></form><button class="btn btn-secondary" ng-click="state.go(\'app.referencePoint\')">+ Novo</button><p ng-if="!vm.data.items.length">Nenhum ponto de referência encontrado</p><table class="table" ng-if="vm.data.items.length"><thead><tr><td>CEP</td><td>Número</td><td>Ponto de Referência</td></tr></thead><tbody><tr class="pointer" ng-repeat="referencePoint in vm.data.items" ng-click="state.go(\'app.referencePoint\', { id: referencePoint._id })"><td>{{ referencePoint.postalCode }}</td><td>{{ referencePoint.number }}</td><td>{{ referencePoint.referencePoint }}</td></tr></tbody></table><ul uib-pagination previous-text="&lsaquo;" next-text="&rsaquo;" last-text="&raquo;" force-ellipses="true" max-size="9" items-per-page="10" total-items="vm.data._metadata.total" ng-if="vm.data._metadata.total > vm.data._metadata.perPage" ng-model="vm.data._metadata.page" ng-change="state.go(state.current, { page: vm.data._metadata.page })"></ul>')}]),function(){"use strict";function e(e,t,r){function a(e){e.stopPropagation(),t.isOpenMenu=!t.isOpenMenu}function o(e){var t=angular.element(e.target).parent();t.hasClass("is-active")?t.removeClass("is-active"):t.addClass("is-active")}function n(){t.isOpenMenu=!1}var s=e;s.toggleMenu=a,s.toogleMenuItem=o,s.closeMenu=n,t.isOpenMenu=!1;t.$on("$stateChangeStart",function(e,t,r){s.closeMenu()});return s}e.$inject=["$scope","$rootScope","$templateCache"],angular.module("app").controller("AppController",e)}(),function(){"use strict";function e(e,t,r,a){e.state=t;e.$on("$stateChangeStart",function(t,o,n){e.$storage=r,a.close()})}function t(e,t,r,a){t.interceptors.push("HTTPInterceptor"),r.otherwise("/dashboard"),location.port||a.debugInfoEnabled(!1),e.state("app",{data:{requireLogin:!0},abstract:!0,views:{"":{templateUrl:"/_layout/layout.html"}}}).state("app.dashboard",{url:"/dashboard",controller:"DashboardController",controllerAs:"vm",templateUrl:"/dashboard/dashboard.html",data:{title:"Dashboard"}})}e.$inject=["$rootScope","$state","$localStorage","NotificationService"],t.$inject=["$stateProvider","$httpProvider","$urlRouterProvider","$compileProvider"],angular.module("app").run(e).config(t)}(),function(){"use strict";function e(e,t,r,a){function o(e){r.list(e).then(function(e){t.data=e.data}).catch(a.error)}return t.q=e.params.q,o({q:t.q,page:e.params.page}),t}e.$inject=["$state","vm","service","NotificationService"],angular.module("app.generic").controller("GenericListController",e)}(),Pace.options.ajax.trackMethods=["GET","POST","PUT","DELETE"],function(){"use strict";function e(){function e(e,t,r){var a,o=5e3,n={type:"success",message:null,timeout:!0,display:function(){return this.isVisible},close:function(){this.isVisible=!1},notify:function(e){this.message=e.message,this.title=e.title,this.type=e.type,this.timeout=e.timeout,this.init()},init:function(){r.cancel(a),this.isVisible=!0,a=this.timeout&&!isNaN(this.timeout)&&this.timeout>o?r(this.close.bind(this),this.timeout):r(this.close.bind(this),o)}};e.alert=n;t.$on("notificationChannel",function(e,t){return"close"===t?n.close():void n.notify(t)})}e.$inject=["$scope","$rootScope","$timeout"];var t=['<div class="alert-container" ng-if="alert.display()">','<div class="alert alert-{{ alert.type }}" role="alert">',"<i class=\"fa\" ng-class=\"{ 'fa-exclamation-circle': (alert.type === 'warning' || alert.type === 'danger'), 'fa-check-circle': alert.type === 'success' }\" aria-hidden=\"true\"></i>",'<p class="alert-text"><b ng-if="alert.title">{{ alert.title | translate }} </b>{{ alert.message | translate }}</p>','<i class="fa fa-close alert-close" ng-click="alert.close()" aria-hidden="true"></i>',"</div>","</div>"];return{restrict:"EA",replace:!1,transclude:!0,scope:!0,template:t.join(""),controller:e}}angular.module("app").directive("appNotification",e)}(),function(){"use strict";function e(){return function(e){if(e)return e.replace(/^\+55\s?/,"")}}function t(){return function(e,t){return(e||[]).reduce(function(e,r){return r[t]?e+r[t]:e},0)}}angular.module("app").filter("telephone",e).filter("sum",t)}(),function(){"use strict";function e(e,t,r,a){var o=this,n=a.defer();return o.request=function(e){return n=a.defer(),e.timeout=n.promise,e},o.response=function(e){return e},o.responseError=function(t){var r={401:"unauthorized",403:"forbidden",405:"unavailable",413:"entity_too_large",422:"unprocessable_entity",500:"unavailable",503:"unavailable",504:"unavailable"},o=String(t.status),s=r[o]?r[o]:"try_again";return/401|403|405|413|422|500|503|504/.test(o)?(n.resolve(r[o]),e.$broadcast(s,t),a.reject(s)):t},o}e.$inject=["$rootScope","$timeout","$translate","$q"],angular.module("app").factory("HTTPInterceptor",e)}(),function(){"use strict";function e(e,r){var a={get:function(r,a,o){var n={url:r,params:a||{},method:"GET"};return angular.extend(n,o),e(n).then(t)},post:function(r,a,o){var n={url:r,data:a,method:"POST",headers:o||{}};return e(n).then(t)},put:function(r,a,o){var n={url:r,data:a,method:"PUT",headers:o||{}};return e(n).then(t)},delete:function(r,a){var o={url:r,method:"DELETE",headers:a||{}};return e(o).then(t)},handleError:function(e){if(e.status>=400){var t=e.data,r=new Error(t.message||"Ocorreu um erro");throw r.status=status,r}return e}};return a}function t(e){return angular.isString(e.data)||(e.data=e.data||{}),e}e.$inject=["$http","$httpParamSerializer"],angular.module("app").factory("HTTPService",e)}(),function(){"use strict";function e(e){function t(t){return function(r){var a={type:t,message:angular.isObject(r)?r.message:r,title:!!angular.isObject(r)&&r.title,timeout:!angular.isObject(r)||r.timeout};e.$broadcast("notificationChannel",a)}}var r={success:t("success"),warning:t("warning"),error:t("danger"),info:t("info"),close:function(){e.$broadcast("notificationChannel","close")}};return r;
}e.$inject=["$rootScope"],angular.module("app").factory("NotificationService",e)}(),function(){"use strict";function e(e){var t={findReferencePoint:function(t){var r={postalCode:t.postalCode,number:t.number};return e.get("/api/postalcodes/referencePoint",r,{cache:!0})},findByPostalCode:function(t){return e.get("/api/postalcodes/"+t,{},{cache:!0})},getLocation:function(t){var r="https://maps.google.com/maps/api/geocode/json?address=",a=t.streetAddress+","+t.number;return e.get(r+a+"&sensor=true",{},{cache:!0}).then(e.handleError).then(function(e){var t=e.data;return t.results[0].geometry.location})}};return t}e.$inject=["HTTPService"],angular.module("app").factory("PostalCodeService",e)}(),function(){"use strict";function e(e){var t={endpoint:"",list:function(t){return e.get("/api/"+this.endpoint,t).then(e.handleError)},byId:function(t){return e.get("/api/"+this.endpoint+"/"+t).then(e.handleError)},save:function(t){var r;return r=t._id?e.put("/api/"+this.endpoint+"/"+t._id,t):e.post("/api/"+this.endpoint,t),r.then(e.handleError)},remove:function(t){return e.remove("/api/"+this.endpoint+"/"+t).then(e.handleError)}};return t}e.$inject=["HTTPService"],angular.module("app.generic").factory("RestService",e)}(),function(){"use strict";function e(e,t,r,a,o,n,s,i){function l(r){t.save(r).then(function(t){var r=t.data;201===t.status&&e.go(e.current.name,{id:r._id}),a.success({title:"customer",message:"form.saved"})}).catch(a.error)}function d(e,t,r,o){n.createOrder(e,t,r,o).then(function(e){e.data;a.success({title:"order",message:"form.saved"}),i.print()}).catch(a.error)}function c(e){"MONEY"===e.type?e.moneyTotal=e.total:(e.moneyTotal=0,e.change=0)}function m(e){return!(!e.postalCode||e.postalCode.length<8||!e.number)&&(r.getLocation(e).then(function(e){v.customer.address.location=e}),void r.findReferencePoint(e).then(function(e){var t=e.data;v.customer.address=v.customer.address||{},v.customer.address.referencePoint=t.referencePoint}))}function u(e){return!e||e.length<8?(v.disableAddressFields=!1,!1):void r.findByPostalCode(e).then(function(t){var r=t.data;v.customer.address=angular.extend(v.customer.address,r),v.customer.address.postalCode=e,v.disableAddressFields=!!r.streetAddress}).catch(function(){v.disableAddressFields=!1})}function p(e){t.byId(e).then(function(e){v.customer=e.data,v.customer.birthDate=o.normalizeBirthDate(v.customer.birthDate),v.disableAddressFields=!(!v.customer.address||!v.customer.address.streetAddress)}).catch(a.error)}function f(){return s.list({attr:"items",size:30}).then(function(e){var t=e.data;v.items=t,v.gifts=angular.copy(t)}).catch(a.error)}var v=this,g=e.params.id;return t.endpoint="customers",v.customer={address:{addressRegion:"SP"}},v.saveCustomer=l,v.saveOrder=d,v.findByPostalCode=u,v.findReferencePoint=m,v.changePaymentType=c,v.dateOptions=o.getDateOptions(),v.deliveryDateOptions=n.getDateOptions(),g&&p(g),f(),v.order={delivery:n.getDeliveryTime()},v}e.$inject=["$state","RestService","PostalCodeService","NotificationService","CustomerService","OrderService","ProductService","$window"],angular.module("app.customers").controller("CustomerController",e)}(),function(){"use strict";function e(e,t,r){var a=this;return r.endpoint="customers",angular.extend(a,t("GenericListController",{vm:a,$state:e,service:r})),a}e.$inject=["$state","$controller","RestService"],angular.module("app.customers").controller("CustomerListController",e)}(),function(){"use strict";function e(e){e.state("app.customers",{url:"/customers?q?page?",controller:"CustomerListController",controllerAs:"vm",templateUrl:"/customers/list.html",data:{title:"Lista de Clientes"}}).state("app.customer",{url:"/customer/:id?",controller:"CustomerController",controllerAs:"vm",templateUrl:"/customers/form.html",data:{title:"Cadastro de Cliente"}})}e.$inject=["$stateProvider"],angular.module("app.customers").config(e)}(),function(){"use strict";function e(e){var t={search:function(t){return e.get("/api/customers",t).then(e.handleError)},getDateOptions:function(){return{formatYear:"yy",maxDate:new Date,minDate:new Date(1900,0,1),startingDay:1,showWeeks:!1}},normalizeBirthDate:function(e){return e?new Date(e):""}};return t}e.$inject=["HTTPService"],angular.module("app.customers").factory("CustomerService",e)}(),function(){"use strict";function e(e){var t=this;return console.log("DashboardController"),t}e.$inject=["$rootScope"],angular.module("app").controller("DashboardController",e)}(),function(){"use strict";function e(e,t,r,a,o,n){function s(t){n.save(t).then(function(t){var r=t.data;201===t.status&&e.go(e.current.name,{id:r._id}),a.success({title:"order",message:"form.saved"})}).catch(a.error)}function i(e){o.search({q:e})}function l(e){t.byId(e).then(function(e){d.order=e.data,d.order.delivery&&d.order.delivery.date&&(d.order.delivery.date=n.normalizeDeliveryDate(d.order.delivery.date)),console.log(d.order)}).catch(a.error)}var d=this,c=e.params.id;return t.endpoint="orders",d.order={},d.saveOrder=s,d.autocompleteCustomer=i,c&&l(c),d.dateOptions={formatYear:"yy",maxDate:new Date(2020,5,22),minDate:new Date,startingDay:1,showWeeks:!1},d}e.$inject=["$state","RestService","ProductService","NotificationService","CustomerService","OrderService"],angular.module("app.orders").controller("OrderController",e)}(),function(){"use strict";function e(e,t,r){var a=this;return r.endpoint="orders",angular.extend(a,t("GenericListController",{vm:a,$state:e,service:r})),a}e.$inject=["$state","$controller","RestService"],angular.module("app.orders").controller("OrderListController",e)}(),function(){"use strict";function e(e,t){var r=this;return r.googleMapsUrl="https://maps.googleapis.com/maps/api/js?key=AIzaSyB7BimdwO2vhjoXDyKWKkWyuzrQsA4TwgM",r.zoom=15,r.organization={location:"-23.6024185,-46.7881249",icon:"/assets/images/organization-marker-image.png"},r.shape={coords:[1,1,1,20,18,20,18,1],type:"poly"},t.list().then(function(e){var t=e.data;r.markers=(t.items||[]).filter(function(e){return e.shippingAddress.location}).map(function(e){return console.log("item",e),{label:e.customer.givenName,position:[e.shippingAddress.location.lat,e.shippingAddress.location.lng]}})}),r}e.$inject=["$state","OrderService"],angular.module("app.orders").controller("OrderMapController",e)}(),function(){"use strict";function e(e){e.state("app.orders",{url:"/orders?q?page?",controller:"OrderListController",controllerAs:"vm",templateUrl:"/orders/list.html",data:{title:"Lista de Pedidos"}}).state("app.map",{url:"/map",controller:"OrderMapController",controllerAs:"vm",templateUrl:"/orders/map.html",data:{title:"Mapa de Entregas"}}).state("app.order",{url:"/order/:id?",controller:"OrderController",controllerAs:"vm",templateUrl:"/orders/print.html",data:{title:"Visualização do Pedido"}})}e.$inject=["$stateProvider"],angular.module("app.orders").config(e)}(),function(){"use strict";function e(e){function t(e){return(e||[]).filter(function(e){return e.quantity})}var r=3e6,a={list:function(t){return e.get("/api/orders",t).then(e.handleError)},getDeliveryTime:function(){var e=(new Date).getTime();return{date:new Date(e+r),price:5}},normalizeDeliveryDate:function(e){return e?new Date(e):""},save:function(e){},getDateOptions:function(){return{formatYear:"yy",minDate:new Date,startingDay:1,showWeeks:!1}},createOrder:function(r,a,o,n){return r&&(a._customer=r._id,a.customer=r,a.shippingAddress=r.address),a.items=t(o),a.gifts=t(n),a.payment&&"MONEY"!==a.payment.paymentType&&(a.payment.change=null,a.payment.moneyTotal=null),e.post("/api/orders",a).then(e.handleError)}};return a}e.$inject=["HTTPService"],angular.module("app.orders").factory("OrderService",e)}(),function(){"use strict";function e(e,t,r){function a(a){t.save(a).then(function(t){var a=t.data;201===t.status&&e.go(e.current.name,{id:a._id}),r.success({title:"product",message:"form.saved"})}).catch(r.error)}function o(e){t.byId(e).then(function(e){n.product=e.data}).catch(r.error)}var n=this,s=e.params.id;return t.endpoint="products",n.product={},n.save=a,s&&o(s),n}e.$inject=["$state","RestService","NotificationService"],angular.module("app.products").controller("ProductController",e)}(),function(){"use strict";function e(e,t,r){var a=this;return r.endpoint="products",angular.extend(a,t("GenericListController",{vm:a,$state:e,service:r})),a}e.$inject=["$state","$controller","RestService"],angular.module("app.products").controller("ProductListController",e)}(),function(){"use strict";function e(e){e.state("app.products",{url:"/products?q?page?",controller:"ProductListController",controllerAs:"vm",templateUrl:"/products/list.html",data:{title:"Lista de Produtos"}}).state("app.product",{url:"/product/:id?",controller:"ProductController",controllerAs:"vm",templateUrl:"/products/form.html",data:{title:"Cadastro de Produto"}})}e.$inject=["$stateProvider"],angular.module("app.products").config(e)}(),function(){"use strict";function e(e){var t={list:function(t){return e.get("/api/products",t).then(e.handleError)}};return t}e.$inject=["HTTPService"],angular.module("app.products").factory("ProductService",e)}(),function(){"use strict";function e(e,t,r){function a(a){t.save(a).then(function(t){var a=t.data;201===t.status&&e.go(e.current.name,{id:a._id}),r.success({title:"referencePoint",message:"form.saved"})}).catch(r.error)}function o(e){t.byId(e).then(function(e){n.referencePoint=e.data}).catch(r.error)}var n=this,s=e.params.id;return t.endpoint="referencePoints",n.referencePoint={},n.save=a,s&&o(s),n}e.$inject=["$state","RestService","NotificationService"],angular.module("app.referencePoints").controller("ReferencePointController",e)}(),function(){"use strict";function e(e,t,r){var a=this;return r.endpoint="referencePoints",angular.extend(a,t("GenericListController",{vm:a,$state:e,service:r})),a}e.$inject=["$state","$controller","RestService"],angular.module("app.referencePoints").controller("ReferencePointListController",e)}(),function(){"use strict";function e(e){e.state("app.referencePoints",{url:"/referencePoints?q?page?",controller:"ReferencePointListController",controllerAs:"vm",templateUrl:"/referencePoints/list.html",data:{title:"Pontos de Referência"}}).state("app.referencePoint",{url:"/referencePoint/:id?",controller:"ReferencePointController",controllerAs:"vm",templateUrl:"/referencePoints/form.html",data:{title:"Cadastro de Ponto de Ref"}})}e.$inject=["$stateProvider"],angular.module("app.referencePoints").config(e)}();